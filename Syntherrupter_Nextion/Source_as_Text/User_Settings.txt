Page User_Settings
    Attributes
        ID               : 0
        Scope            : local
        Send Component ID: disabled
        Locked           : no
    
    Events
        Preinitialize Event
            // Prevent page refreshs until postinit
            ref_stop
            //
            // Load colors
            click fLoadColors,1
            click fLoadModes,1
            //
            // Display username
            if(User_Settings.userNum.val==0)
            {
                tUser.txt=" "+User_Settings.u0Name.txt
            }else if(User_Settings.userNum.val==1)
            {
                tUser.txt=" "+User_Settings.u1Name.txt
            }else if(User_Settings.userNum.val==2)
            {
                tUser.txt=" "+User_Settings.u2Name.txt
            }
            //
            vis fLoadModes,0
            vis fLoadColors,0
            vis fCheck,0
            vis fSysex,0
            vis fDraw,0
            //
            // Properly hide the help stuff.
            vis hHelp,0
            vis tHelp,0
            //
            // Load global variable values into local variables. Note: Since a component consists of many different properties (like font size, color, position, ...) its memory footprint is much larger and it should not be global.
            tU0Name.txt=u0Name.txt
            tU0Code.txt=u0Code.txt
            tU1Name.txt=u1Name.txt
            tU1Code.txt=u1Code.txt
            tU2Name.txt=u2Name.txt
            tU2Code.txt=u2Code.txt
            user0Ontime.val=u0Ontime.val
            user0BPS.val=u0BPS.val
            user0Duty.val=u0Duty.val
            user1Ontime.val=u1Ontime.val
            user1BPS.val=u1BPS.val
            user1Duty.val=u1Duty.val
            user2Ontime.val=u2Ontime.val
            user2BPS.val=u2BPS.val
            user2Duty.val=u2Duty.val
            //
            // Each user can only see the settings of himself and "lower" users. Only user 2 can edit them.
            if(User_Settings.userNum.val!=2)
            {
                vis tU2Name,0
                vis tU2Code,0
                vis user2Ontime,0
                vis user2BPS,0
                vis user2Duty,0
                vis tus2,0
                vis tHz2,0
                vis tPerc2,0
                if(User_Settings.userNum.val!=1)
                {
                    vis tU1Name,0
                    vis tU1Code,0
                    vis user1Ontime,0
                    vis user1BPS,0
                    vis user1Duty,0
                    vis tus1,0
                    vis tHz1,0
                    vis tPerc1,0
                    vis tSelToMod,0
                    vis b0,0
                    vis b1,0
                    vis b2,0
                    vis b3,0
                    vis b4,0
                    vis b5,0
                    vis b6,0
                    vis b7,0
                    vis b8,0
                    vis b9,0
                    vis bClear,0
                    vis bOK,0
                    if(User_Settings.userNum.val!=0)
                    {
                        vis tU0Name,0
                        vis tU0Code,0
                        vis user0Ontime,0
                        vis user0BPS,0
                        vis user0Duty,0
                        vis tus0,0
                        vis tHz0,0
                        vis tPerc0,0
                    }
                }
            }
            //
            // Idle field is just used for default text/background color and as target for the numpad if no component is selected. Ergo should be hidden,
            vis idle,0
            newValTargetId.val=idle.id
            //
            // Enable page refreshs again
            ref_star
        
        Postinitialize Event
            // In case we return from the keyboard page, transmit the corresponding field.
            click fSysex,1
            //
            // Draw gridlines
            click fDraw,1
        
        Touch Press Event
            if(Other_Settings.nBackOff.val!=0)
            {
                // Default "stop" action.
                // Set ontime and duty to 0 for all modes. See fSysex for details
                // Disable all modes as well.
                printh f0 00 26 06 01 7f 20 00 00 7f 00 00 00 00 00 f7
                printh f0 00 26 05 01 7f 21 00 00 7f 00 00 00 00 00 f7
                printh f0 00 26 05 01 7f 22 00 00 7f 00 00 00 00 00 f7
                // Set all ontime and duty settings of all pages to 0.
                // First come the global variables then the local variables.
                Simple.ontime.val=0
                Simple.duty.val=0
                Simple.set1.val=Simple.set1.val&0x0000ffff
                Simple.set2.val=Simple.set2.val&0x0000ffff
                Simple.set3.val=Simple.set3.val&0x0000ffff
                Simple.set4.val=Simple.set4.val&0x0000ffff
                Simple.set5.val=Simple.set5.val&0x0000ffff
                Simple.set6.val=Simple.set6.val&0x0000ffff
                MIDI_Live.ontime.val=0
                MIDI_Live.duty.val=0
                MIDI_Live.set1.val=0
                MIDI_Live.set2.val=0
                MIDI_Live.set3.val=0
                MIDI_Live.set4.val=0
                MIDI_Live.set5.val=0
                MIDI_Live.set6.val=0
                Lightsaber.ontime.val=0
                Lightsaber.ontimes12.val=0
                Lightsaber.ontimes34.val=0
                Lightsaber.ontimes56.val=0
            }
        
        Page Exit Event
            // Store local component values in global variables. Note: Since a component consists of many different properties (like font size, color, position, ...) its memory footprint is much larger and it should not be global.
            u0Name.txt=tU0Name.txt
            u0Code.txt=tU0Code.txt
            u1Name.txt=tU1Name.txt
            u1Code.txt=tU1Code.txt
            u2Name.txt=tU2Name.txt
            u2Code.txt=tU2Code.txt
            u0Ontime.val=user0Ontime.val
            u0BPS.val=user0BPS.val
            u0Duty.val=user0Duty.val
            u1Ontime.val=user1Ontime.val
            u1BPS.val=user1BPS.val
            u1Duty.val=user1Duty.val
            u2Ontime.val=user2Ontime.val
            u2BPS.val=user2BPS.val
            u2Duty.val=user2Duty.val
        
Variable (int32) currentHelp
    Attributes
        ID   : 3
        Scope: local
        Value: 4294967295
    
Variable (string) u0Name
    Attributes
        ID            : 4
        Scope         : global
        Text          : Padawan
        Max. Text Size: 16
    
Variable (string) u0Code
    Attributes
        ID            : 5
        Scope         : global
        Text          : 1234
        Max. Text Size: 16
    
Variable (int32) u0Ontime
    Attributes
        ID   : 6
        Scope: global
        Value: 100
    
Variable (int32) u0BPS
    Attributes
        ID   : 7
        Scope: global
        Value: 1000
    
Variable (int32) u0Duty
    Attributes
        ID   : 8
        Scope: global
        Value: 60
    
Variable (string) u1Name
    Attributes
        ID            : 9
        Scope         : global
        Text          : Jedi Knight
        Max. Text Size: 16
    
Variable (string) u1Code
    Attributes
        ID            : 10
        Scope         : global
        Text          : 8079
        Max. Text Size: 16
    
Variable (int32) u1Ontime
    Attributes
        ID   : 11
        Scope: global
        Value: 150
    
Variable (int32) u1BPS
    Attributes
        ID   : 12
        Scope: global
        Value: 1000
    
Variable (int32) u1Duty
    Attributes
        ID   : 13
        Scope: global
        Value: 80
    
Variable (string) u2Name
    Attributes
        ID            : 14
        Scope         : global
        Text          : Master Yoda
        Max. Text Size: 16
    
Variable (string) u2Code
    Attributes
        ID            : 15
        Scope         : global
        Text          : 0
        Max. Text Size: 16
    
Variable (int32) u2Ontime
    Attributes
        ID   : 16
        Scope: global
        Value: 200
    
Variable (int32) u2BPS
    Attributes
        ID   : 17
        Scope: global
        Value: 1000
    
Variable (int32) u2Duty
    Attributes
        ID   : 18
        Scope: global
        Value: 100
    
Variable (string) tAutoCode
    Attributes
        ID            : 19
        Scope         : global
        Text          : 0
        Max. Text Size: 1
    
Variable (int32) newValTargetId
    Attributes
        ID   : 39
        Scope: local
        Value: 64
    
Variable (int32) newSelect
    Attributes
        ID   : 40
        Scope: local
        Value: 0
    
Variable (int32) userNum
    Attributes
        ID   : 42
        Scope: global
        Value: 0
    
Variable (string) asciiTemp
    Attributes
        ID            : 78
        Scope         : local
        Text          : a
        Max. Text Size: 97
    
Variable (int32) asciiCode
    Attributes
        ID   : 79
        Scope: local
        Value: 0
    
Variable (int32) temp
    Attributes
        ID   : 80
        Scope: local
        Value: 0
    
Variable (int32) origin
    Attributes
        ID   : 81
        Scope: global
        Value: 4294967295
    
Number user0Ontime
    Attributes
        ID                 : 68
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 100
    
    Events
        Touch Press Event
            // Check if values are legal
            click fCheck,0
            if(User_Settings.userNum.val!=0)
            {
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                user0Ontime.bco=idle.pco
                user0Ontime.pco=idle.bco
                newValTargetId.val=user0Ontime.id
                // A new value has been selected
                newSelect.val=1
            }
        
Number user1Ontime
    Attributes
        ID                 : 69
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 150
    
    Events
        Touch Press Event
            // Check if values are legal
            click fCheck,0
            if(User_Settings.userNum.val==2)
            {
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                user1Ontime.bco=idle.pco
                user1Ontime.pco=idle.bco
                newValTargetId.val=user1Ontime.id
                // A new value has been selected
                newSelect.val=1
            }
        
Number user2Ontime
    Attributes
        ID                 : 70
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 200
    
    Events
        Touch Press Event
            // This value is automatically determined by the microcontroller from the max coil settings.Currently it is only updated at startup.
            // Check if values are legal
            //click fCheck,0
            //if(tUser.txt==u2Name.txt)
            //{
            // Reset push state of last selected value
            //  b[newValTargetId.val].bco=idle.bco
            //  b[newValTargetId.val].pco=idle.pco
            // Mark this field as pushed
            //  user2Ontime.bco=idle.pco
            //  user2Ontime.pco=idle.bco
            //  newValTargetId.val=user2Ontime.id
            // A new value has been selected
            //  newSelect.val=1
            //}
        
Number user0BPS
    Attributes
        ID                 : 71
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 1000
    
    Events
        Touch Press Event
            // Check if values are legal
            click fCheck,0
            if(User_Settings.userNum.val!=0)
            {
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                user0BPS.bco=idle.pco
                user0BPS.pco=idle.bco
                newValTargetId.val=user0BPS.id
                // A new value has been selected
                newSelect.val=1
            }
        
Number user1BPS
    Attributes
        ID                 : 72
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 1000
    
    Events
        Touch Press Event
            // Check if values are legal
            click fCheck,0
            if(User_Settings.userNum.val==2)
            {
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                user1BPS.bco=idle.pco
                user1BPS.pco=idle.bco
                newValTargetId.val=user1BPS.id
                // A new value has been selected
                newSelect.val=1
            }
        
Number user2BPS
    Attributes
        ID                 : 73
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 1000
    
    Events
        Touch Press Event
            // Check if values are legal
            click fCheck,0
            if(userNum.val==2)
            {
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                user2BPS.bco=idle.pco
                user2BPS.pco=idle.bco
                newValTargetId.val=user2BPS.id
                // A new value has been selected
                newSelect.val=1
            }
        
XFloat idle
    Attributes
        ID                 : 41
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 0
    
XFloat user0Duty
    Attributes
        ID                 : 74
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 60
    
    Events
        Touch Press Event
            // .val is in 10ths of percent
            // Check if values are legal
            click fCheck,0
            if(User_Settings.userNum.val!=0)
            {
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                user0Duty.bco=idle.pco
                user0Duty.pco=idle.bco
                newValTargetId.val=user0Duty.id
                // A new value has been selected
                newSelect.val=1
            }
        
XFloat user1Duty
    Attributes
        ID                 : 75
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 80
    
    Events
        Touch Press Event
            // Check if values are legal
            click fCheck,0
            // .val is in 10ths of percent
            if(User_Settings.userNum.val==2)
            {
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                user1Duty.bco=idle.pco
                user1Duty.pco=idle.bco
                newValTargetId.val=user1Duty.id
                // A new value has been selected
                newSelect.val=1
            }
        
XFloat user2Duty
    Attributes
        ID                 : 76
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 100
    
    Events
        Touch Press Event
            // .val is in 10ths of percent
            // This value is automatically determined by the microcontroller from the max coil settings.Currently it is only updated at startup.
            // Check if values are legal
            //click fCheck,0
            //if(tUser.txt==u2Name.txt)
            //{
            // Reset push state of last selected value
            //  b[newValTargetId.val].bco=idle.bco
            //  b[newValTargetId.val].pco=idle.pco
            // Mark this field as pushed
            //  user2Duty.bco=idle.pco
            //  user2Duty.pco=idle.bco
            //  newValTargetId.val=user2Duty.id
            // A new value has been selected
            //  newSelect.val=1
            //}
        
Text tHelp
    Attributes
        ID                 : 1
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : 
        Max. Text Size     : 900
    
    Events
        Touch Press Event
            // This object is only visible in help mode. No need to be "transparent" to clicks in normal operation.
            click bReturn,0
        
Text tHideBack2
    Attributes
        ID                 : 20
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  
        Max. Text Size     : 1
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tHideBack
    Attributes
        ID                 : 21
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  
        Max. Text Size     : 1
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tTitle
    Attributes
        ID                 : 22
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : User Settings
        Max. Text Size     : 22
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tUserCode
    Attributes
        ID                 : 24
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Code:
        Max. Text Size     : 12
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tUserOntime
    Attributes
        ID                 : 25
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : max. Ontime:
        Max. Text Size     : 12
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tUserName
    Attributes
        ID                 : 26
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Name:
        Max. Text Size     : 12
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tUserDuty
    Attributes
        ID                 : 27
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : max. Duty:
        Max. Text Size     : 12
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tUserBPS
    Attributes
        ID                 : 28
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : max. BPS:
        Max. Text Size     : 12
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tus0
    Attributes
        ID                 : 29
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : µs
        Max. Text Size     : 3
    
Text tHz0
    Attributes
        ID                 : 30
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Hz
        Max. Text Size     : 2
    
Text tPerc0
    Attributes
        ID                 : 31
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : %
        Max. Text Size     : 1
    
Text tus1
    Attributes
        ID                 : 32
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : µs
        Max. Text Size     : 3
    
Text tHz1
    Attributes
        ID                 : 33
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Hz
        Max. Text Size     : 2
    
Text tPerc1
    Attributes
        ID                 : 34
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : %
        Max. Text Size     : 1
    
Text tus2
    Attributes
        ID                 : 35
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : µs
        Max. Text Size     : 3
    
Text tHz2
    Attributes
        ID                 : 36
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Hz
        Max. Text Size     : 2
    
Text tPerc2
    Attributes
        ID                 : 37
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : %
        Max. Text Size     : 1
    
Text tSelToMod
    Attributes
        ID                 : 38
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Select any value to modify.
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text fCheck
    Attributes
        ID                 : 43
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  
        Max. Text Size     : 10
    
    Events
        Touch Release Event
            // Settings must stay in certain ranges. this function checks and fixes them.
            // Code order: check all coil 1 settings, then repeat for coils 2-6.
            //
            sys0=user0Ontime.val/10
            if(sys0>4095)
            {
                // Ontime / 10 must be smaller than 4096 (12 bits)
                sys0=4095
            }
            user0Ontime.val=sys0*10
            //
            sys0=user0BPS.val/10
            if(sys0>2047)
            {
                // BPS / 10 must be smaller than 2048 (11 bits)
                sys0=2047
            }
            user0BPS.val=sys0*10
            //
            if(user0Duty.val>511)
            {
                // Duty [in 1/1000] must be smaller than 512 (9 bits)
                user0Duty.val=511
            }
            //
            sys0=user1Ontime.val/10
            if(sys0>4095)
            {
                // Ontime / 10 must be smaller than 4096 (12 bits)
                sys0=4095
            }
            user1Ontime.val=sys0*10
            //
            sys0=user1BPS.val/10
            if(sys0>2047)
            {
                // BPS / 10 must be smaller than 2048 (11 bits)
                sys0=2047
            }
            user1BPS.val=sys0*10
            //
            if(user1Duty.val>511)
            {
                // Duty [in 1/1000] must be smaller than 512 (9 bits)
                user1Duty.val=511
            }
            //
            sys0=user2Ontime.val/10
            if(sys0>4095)
            {
                // Ontime / 10 must be smaller than 4096 (12 bits)
                sys0=4095
            }
            user2Ontime.val=sys0*10
            //
            sys0=user2BPS.val/10
            if(sys0>2047)
            {
                // BPS / 10 must be smaller than 2048 (11 bits)
                sys0=2047
            }
            user2BPS.val=sys0*10
            //
            if(user2Duty.val>511)
            {
                // Duty [in 1/1000] must be smaller than 512 (9 bits)
                user2Duty.val=511
            }
            //
            click fSysex,1
        
Text tUser
    Attributes
        ID                 : 44
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  Guest
        Max. Text Size     : 32
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tMSI
    Attributes
        ID                 : 45
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Simple
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tMML
    Attributes
        ID                 : 46
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : MIDI Live
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tMLS
    Attributes
        ID                 : 47
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Lightsaber
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tU0Name
    Attributes
        ID                 : 62
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Padawan
        Max. Text Size     : 16
    
    Events
        Touch Release Event
            if(userNum.val!=0)
            {
                Keyboard.origin.val=dp
                Keyboard.target.val=u0Name.id
                Keyboard.sComp.txt="User 0 Name"
                page Keyboard
            }
        
Text tU1Name
    Attributes
        ID                 : 63
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Jedi Knight
        Max. Text Size     : 16
    
    Events
        Touch Release Event
            if(userNum.val!=0)
            {
                Keyboard.origin.val=dp
                Keyboard.target.val=u1Name.id
                Keyboard.sComp.txt="User 1 Name"
                page Keyboard
            }
        
Text tU2Name
    Attributes
        ID                 : 64
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Master Yoda
        Max. Text Size     : 16
    
    Events
        Touch Release Event
            if(userNum.val==2)
            {
                Keyboard.origin.val=dp
                Keyboard.target.val=u2Name.id
                Keyboard.sComp.txt="User 2 Name"
                page Keyboard
            }
        
Text tU0Code
    Attributes
        ID                 : 65
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : 1234
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            tU0Code.pw=0
        
        Touch Release Event
            tU0Code.pw=1
            if(userNum.val!=0)
            {
                Keyboard.origin.val=dp
                Keyboard.target.val=u0Code.id
                Keyboard.sComp.txt="User 0 Code"
                page Keyboard
            }
        
Text tU1Code
    Attributes
        ID                 : 66
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : 2345
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            tU1Code.pw=0
        
        Touch Release Event
            tU1Code.pw=1
            if(userNum.val!=0)
            {
                Keyboard.origin.val=dp
                Keyboard.target.val=u1Code.id
                Keyboard.sComp.txt="User 1 Code"
                page Keyboard
            }
        
Text tU2Code
    Attributes
        ID                 : 67
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : 0
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            tU2Code.pw=0
        
        Touch Release Event
            tU2Code.pw=1
            if(userNum.val==2)
            {
                Keyboard.origin.val=dp
                Keyboard.target.val=u2Code.id
                Keyboard.sComp.txt="User 2 Code"
                page Keyboard
            }
        
Button bReturn
    Attributes
        ID               : 23
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : â†
        Max. Text Size   : 3
    
    Events
        Touch Press Event
            // Store local component values in global variables. Note: Since a component consists of many different properties (like font size, color, position, ...) its memory footprint is much larger and it should not be global.
            click bOK,0
            u0Name.txt=tU0Name.txt
            u0Code.txt=tU0Code.txt
            u1Name.txt=tU1Name.txt
            u1Code.txt=tU1Code.txt
            u2Name.txt=tU2Name.txt
            u2Code.txt=tU2Code.txt
            u0Ontime.val=user0Ontime.val
            u0BPS.val=user0BPS.val
            u0Duty.val=user0Duty.val
            u1Ontime.val=user1Ontime.val
            u1BPS.val=user1BPS.val
            u1Duty.val=user1Duty.val
            u2Ontime.val=user2Ontime.val
            u2BPS.val=user2BPS.val
            u2Duty.val=user2Duty.val
            //
            // Serial Data format: 'u', Data Byte 1, 2, ...
            // Byte 1:
            //   Bit 6-7: User. Can be 0, 1 or 2.
            //   Bit   5: Indicates content of the following bytes. 0 = Name, 1 = Password
            //   Bit 0-4: Number of following bytes minus one. This means Name or password are at least 1 character and at most 32 characters.
            // Byte 2-x: Characters of the username/password without null termination character.
            //
            // sys0 will contain byte 1.
            // sys1 is used as temp variable
            // Start with user 0, name, then his password, then user 1 name, etc.
            strlen tU0Name.txt,sys0
            sys0-=1
            sys0=sys0&0x1f
            prints "u",1
            prints sys0,1
            sys0+=1
            prints tU0Name.txt,sys0
            //
            strlen tU0Code.txt,sys0
            sys0-=1
            sys0=sys0&0x1f
            sys1=1<<5
            sys0+=sys1
            prints "u",1
            prints sys0,1
            sys0+=1
            prints tU0Code.txt,sys0
            //
            strlen tU1Name.txt,sys0
            sys0-=1
            sys0=sys0&0x1f
            sys1=1<<6
            sys0+=sys1
            prints "u",1
            prints sys0,1
            sys0+=1
            prints tU1Name.txt,sys0
            //
            strlen tU1Code.txt,sys0
            sys0-=1
            sys0=sys0&0x1f
            sys1=1<<6
            sys0+=sys1
            sys1=1<<5
            sys0+=sys1
            prints "u",1
            prints sys0,1
            sys0+=1
            prints tU1Code.txt,sys0
            //
            strlen tU2Name.txt,sys0
            sys0-=1
            sys0=sys0&0x1f
            sys1=2<<6
            sys0+=sys1
            prints "u",1
            prints sys0,1
            sys0+=1
            prints tU2Name.txt,sys0
            //
            strlen tU2Code.txt,sys0
            sys0-=1
            sys0=sys0&0x1f
            sys1=2<<6
            sys0+=sys1
            sys1=1<<5
            sys0+=sys1
            prints "u",1
            prints sys0,1
            sys0+=1
            prints tU2Code.txt,sys0
            // Serial Data format: 'd', Data Byte 1, 2, 3, 4, 5
            // Data byte 1:
            //    Bit 6-7: 0 = User settings
            //    Bit 0-5:User whose limits are being set (0,1 or 2)
            // Data byte 2-5: Bit field with settings
            //    Bit  0-11: Maximum allowed ontime [10us]
            //    Bit 12-22: Maximum allowed BPS/interrupt frequency [10Hz]
            //    Bit 23-31: Maximum allowed duty [1/1000]
            //
            // sys0 will contain the bit field (a.k.a. the data bytes 2-5)
            // sys1 is used as temp variable
            // sys2 is the coil number
            sys0=u0Ontime.val/10
            sys1=u0BPS.val/10
            sys1=sys1<<12
            sys0+=sys1
            sys1=u0Duty.val<<23
            sys0+=sys1
            prints "d",1
            prints 0,1
            prints sys0,4
            sys0=u1Ontime.val/10
            sys1=u1BPS.val/10
            sys1=sys1<<12
            sys0+=sys1
            sys1=u1Duty.val<<23
            sys0+=sys1
            prints "d",1
            prints 1,1
            prints sys0,4
            sys0=u2Ontime.val/10
            sys1=u2BPS.val/10
            sys1=sys1<<12
            sys0+=sys1
            sys1=u2Duty.val<<23
            sys0+=sys1
            prints "d",1
            prints 2,1
            prints sys0,4
        
        Touch Release Event
            page origin.val
        
Button b1
    Attributes
        ID               : 48
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 1
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=1
        
Button b2
    Attributes
        ID               : 49
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 2
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=2
        
Button b3
    Attributes
        ID               : 50
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 3
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=3
        
Button b4
    Attributes
        ID               : 51
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 4
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=4
        
Button b5
    Attributes
        ID               : 52
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 5
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=5
        
Button b6
    Attributes
        ID               : 53
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 6
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=6
        
Button bClear
    Attributes
        ID               : 54
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : X
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            b[newValTargetId.val].val=0
        
Button b0
    Attributes
        ID               : 55
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 0
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
        
Button b9
    Attributes
        ID               : 56
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 9
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=9
        
Button b8
    Attributes
        ID               : 57
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 8
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=8
        
Button b7
    Attributes
        ID               : 58
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 7
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(newSelect.val!=0)
            {
                newSelect.val=0
                b[newValTargetId.val].val=0
            }else
            {
                b[newValTargetId.val].val*=10
            }
            b[newValTargetId.val].val+=7
        
Button bOK
    Attributes
        ID               : 59
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : ok
        Max. Text Size   : 2
    
    Events
        Touch Release Event
            b[newValTargetId.val].bco=idle.bco
            b[newValTargetId.val].pco=idle.pco
            newValTargetId.val=idle.id
            click fCheck,0
        
Dual-state Button btHelp
    Attributes
        ID               : 2
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : ?
        Max. Text Size   : 1
    
    Events
        Touch Release Event
            if(btHelp.val==0)
            {
                // In case something was displayed, get rid of it
                bReturn.val=1
                click hHelp,0
                // disable help overlay
                vis hHelp,0
            }else
            {
                vis hHelp,1
            }
            // Restore drawings
            click fDraw,1
        
Hotspot fLoadModes
    Attributes
        ID               : 60
        Scope            : local
        Send Component ID: disabled
    
    Events
        Touch Press Event
            // Load active modes
            sys0=Settings.activeModes.val&4
            if(sys0!=0)
            {
                // Lightsaber Mode is active
                tMLS.bco=Settings.backSelectCol2.val
            }
            //
            // Display all active modes
            sys0=Settings.activeModes.val&1
            if(sys0!=0)
            {
                // Simple Mode is active
                tMSI.bco=Settings.backSelectCol2.val
            }
            sys0=Settings.activeModes.val&2
            if(sys0!=0)
            {
                // MIDI Live Mode is active
                tMML.bco=Settings.backSelectCol2.val
            }
        
Hotspot fSysex
    Attributes
        ID               : 61
        Scope            : local
        Send Component ID: disabled
    
    Events
        Touch Press Event
            // Sends a Syntherrupter Sysex command that updates Syntherrupter with whatever
            // has been changed on this page.
            // Package format:
            // F0 00 DMID DMID VERSION DEVICE PN_LSB PN_MSB TG_LSB TG_MSB VAL_LSB VAL VAL VAL VAL_MSB F7
            // DMID DMID = 26 05
            // VERSION = 01
            // DEVICE = 7f (wildcard)
            // PN, TG, VAL: see syntherrupter sysex documentation
            //
            // To send:
            //
            if(Keyboard.target.val>=u0Name.id&&Keyboard.target.val<=u2Duty.id)
            {
                sys1=Keyboard.target.val
            }else if(newValTargetId.val!=idle.id)
            {
                sys1=newValTargetId.val
            }else
            {
                // Nothing to do! But there's no "return" statement.
                sys1=-1
            }
            if(sys1>=0)
            {
                //
                // PN_LSB PN_MSB TG_LSB can all be determined by the component ID
                // In the case of integer commands, TG_MSB can also be included since it's 0x00
                if(sys1==tU0Name.id)
                {
                    temp.val=0x000240
                }else if(sys1==tU1Name.id)
                {
                    temp.val=0x010240
                }else if(sys1==tU2Name.id)
                {
                    temp.val=0x020240
                }else if(sys1==tU0Code.id)
                {
                    temp.val=0x000241
                }else if(sys1==tU1Code.id)
                {
                    temp.val=0x010241
                }else if(sys1==tU2Code.id)
                {
                    temp.val=0x020241
                }else if(sys1==user0Ontime.id)
                {
                    temp.val=0x000242
                }else if(sys1==user1Ontime.id)
                {
                    temp.val=0x010242
                }else if(sys1==user2Ontime.id)
                {
                    temp.val=0x020242
                }else if(sys1==user0BPS.id)
                {
                    temp.val=0x000243
                }else if(sys1==user1BPS.id)
                {
                    temp.val=0x010243
                }else if(sys1==user2BPS.id)
                {
                    temp.val=0x020243
                }else if(sys1==user0Duty.id)
                {
                    temp.val=0x000244
                }else if(sys1==user1Duty.id)
                {
                    temp.val=0x010244
                }else if(sys1==user2Duty.id)
                {
                    temp.val=0x020244
                }
                //
                // Distinguish between string and integer data
                sys0=temp.val&0xff
                if(sys0>=0x42)
                {
                    // Integer settings
                    // SYSEX_START DMID VERSION DEVICE
                    printh f0 00 26 05 01 7f
                    // PN_LSB PN_MSB TG_LSB TG_MSB
                    prints temp.val,4
                    // VAL (4 bytes to be packed into 5 groups of 7 bit)
                    // Integer; meaning depends on selection
                    sys1=b[sys1].val
                    sys2=sys1
                    sys2&=0x7f
                    prints sys2,1
                    sys1>>=7
                    sys2=sys1&0x7f
                    prints sys2,1
                    sys1>>=7
                    sys2=sys1&0x7f
                    prints sys2,1
                    sys1>>=7
                    sys2=sys1&0x7f
                    prints sys2,1
                    sys1>>=7
                    sys2=sys1&0x7f
                    prints sys2,1
                    // SYSEX_END
                    printh f7
                }else
                {
                    for(sys0=0;sys0<16;sys0+=4)
                    {
                        sys1=0
                        for(sys2=sys0+3;sys2>=sys0;sys2--)
                        {
                            substr b[Keyboard.target.val].txt,asciiTemp.txt,sys2,1
                            click charToInt,1
                            sys1<<=8
                            sys1|=asciiCode.val
                        }
                        // No need to transmit empty strings except if it's the first part of the string.
                        if(sys0==0||sys1!=0)
                        {
                            // SYSEX_START DMID VERSION DEVICE
                            printh f0 00 26 05 01 7f
                            // PN_LSB PN_MSB TG_LSB
                            prints temp.val,3
                            // TG_MSB
                            sys2=sys0/4
                            prints sys2,1 // Char Group
                            // VAL (4 bytes to be packed into 5 groups of 7 bit)
                            sys2=sys1
                            sys2&=0x7f
                            prints sys2,1
                            sys1>>=7
                            sys2=sys1&0x7f
                            prints sys2,1
                            sys1>>=7
                            sys2=sys1&0x7f
                            prints sys2,1
                            sys1>>=7
                            sys2=sys1&0x7f
                            prints sys2,1
                            sys1>>=7
                            sys2=sys1&0x7f
                            prints sys2,1
                            // SYSEX_END
                            printh f7
                        }
                    }
                }
                // Value no longer useful; reset.
                Keyboard.target.val=-1
            }
        
Hotspot charToInt
    Attributes
        ID               : 77
        Scope            : local
        Send Component ID: disabled
    
    Events
        Touch Press Event
            // The fact that this is necessary is is utterly ridiculous.
            // asciiTemp is used as input as well as as intermediary variable.
            spstr " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~PLACEHOLDER",asciiTemp.txt,asciiTemp.txt,0
            strlen asciiTemp.txt,asciiCode.val
            // If input is empty, spstr will return the full string. Return 0 instead.
            if(asciiCode.val>=96)
            {
                asciiCode.val=0
            }else
            {
                asciiCode.val+=32
            }
        
Hotspot fLoadColors
    Attributes
        ID               : 82
        Scope            : local
        Send Component ID: disabled
    
    Events
        Touch Press Event
            // Changes all page components according to the current color set.
            // Note: This component has to be the last component of the page.
            //
            // sys0: component id
            // sys1: component type
            // sys2: picture id offset for current color mode
            sys2=Settings.colorMode.val*Settings.picCount.val
            for(sys0=0;sys0<fLoadColors.id;sys0++)
            {
                // More convenient for typing
                sys1=b[sys0].type
                if(sys1==121)
                {
                    // Types that have bco
                    // page
                    if(b[sys0].bco==Settings.backCol2Deflt.val)
                    {
                        b[sys0].bco=Settings.backCol2.val
                    }else
                    {
                        b[sys0].bco=Settings.backCol.val
                    }
                }else if(sys1==54||sys1==59||sys1==116||sys1==55)
                {
                    // Types that have bco, pco, and sta:
                    // number, float, text, scroll text
                    if(b[sys0].sta==1)
                    {
                        if(b[sys0].bco==Settings.backCol2Deflt.val)
                        {
                            b[sys0].bco=Settings.backCol2.val
                            b[sys0].pco=Settings.frontCol2.val
                        }else
                        {
                            b[sys0].bco=Settings.backCol.val
                            b[sys0].pco=Settings.frontCol.val
                        }
                    }
                }else if(sys1==98||sys1==53)
                {
                    // Types that have pco, pic, pco2, pic2, sta:
                    // button, dual-state button
                    if(b[sys0].sta==2)
                    {
                        b[sys0].pco=Settings.frontCol.val
                        b[sys0].pco2=Settings.backCol.val
                        b[sys0].pic=b[sys0].pic%Settings.picCount.val
                        b[sys0].pic+=sys2
                        b[sys0].pic2=b[sys0].pic+1
                    }
                }else if(sys1==58)
                {
                    // Types that have bco, pco
                    // QR Code
                    b[sys0].bco=Settings.backCol.val
                    b[sys0].pco=Settings.qrFrontCol.val
                }else if(sys1==1)
                {
                    // Types that have pic, pic1, pic2:
                    // slider
                    b[sys0].pic=b[sys0].pic%Settings.picCount.val
                    b[sys0].pic+=sys2
                    b[sys0].pic1=b[sys0].pic
                    b[sys0].pic2=b[sys0].pic2%Settings.picCount.val
                    b[sys0].pic2+=sys2
                }
            }
        
Hotspot fDraw
    Attributes
        ID               : 83
        Scope            : local
        Send Component ID: disabled
    
    Events
        Touch Press Event
            // Draw table grid
            //
            // Right border of the table
            sys0=0
            if(User_Settings.userNum.val==0)
            {
                sys0=tus0.x+tus0.w-1
            }else if(User_Settings.userNum.val==1)
            {
                sys0=tus1.x+tus1.w-1
            }else if(User_Settings.userNum.val==2)
            {
                sys0=tus2.x+tus2.w-1
            }
            // Horizontal grid lines
            for(sys1=tU0Name.y+tU0Name.h+2;sys1<user0Duty.y;sys1+=tU0Name.h+5)
            {
                line tUserName.x,sys1,sys0,sys1,tUserName.pco
            }
            //for(sys2=0;sys2<4;sys2++)
            //{
            //  sys1=sys2*31
            //  sys1+=116
            //  line 15,sys1,sys0,sys1,tUserName.pco
            //}
            //
            // Table height
            //sys1+=31
            // Vertical grid lines
            //for(sys2=tU0Name.y+tU0Name.h+3;sys2<user0Duty.y;sys2+=tU0Name.h+5)
            for(sys2=tU0Name.x-8;sys2<sys0;sys2+=tU0Name.w+15)
            {
                line sys2,tUserName.y,sys2,sys1,tUserName.pco
            }
        
Hotspot hHelp
    Attributes
        ID               : 84
        Scope            : local
        Send Component ID: disabled
    
    Events
        Touch Press Event
            // Determine component/feature that would have been touched.
            sys1=0
            for(sys0=fLoadColors.id;sys0>=0;sys0--)
            {
                // Ignore hotspots, touchcaps, variables
                if(b[sys0].type!=5&&b[sys0].type!=51&&b[sys0].type!=52&&b[sys0].type!=109)
                {
                    x0=b[sys0].x
                    y0=b[sys0].y
                    x1=b[sys0].w
                    y1=b[sys0].h
                    x1+=x0
                    y1+=y0
                    if(tch0>=x0&&tch0<x1&&tch1>=y0&&tch1<y1)
                    {
                        sys1=sys0
                        // abort loop
                        sys0=-1
                    }
                }
            }
            if(currentHelp.val>=0&&sys1==bReturn.id)
            {
                // Return button has been pressed while help is being displayed. This means
                // hide the help text again (see touch release event)
                bReturn.val=1
            }else if(sys1==btHelp.id)
            {
                // Question mark button has been pressed. Disable help mode (see touch release event).
                btHelp.val=0
            }else if(currentHelp.val>=0)
            {
                // Help is being displayed and something else has been pressed.
                // Act as if the page background had been pressed.
                // Note: this can make other UI elements to "pop up", therefore bring the text back on top
                // TODO: Prevent flickering!
                click 0,1
                doevents
                ref tHelp
            }else
            {
                // Show help according to what has been touched.
                // Assume that some new help will be displayed
                sys0=1
                tHelp.txt=""
                if(Settings.firstHelp.val!=0)
                {
                    Settings.firstHelp.val=0
                    tHelp.txt+="Help Mode Enabled \r\r"
                    tHelp.txt+="You've enabled the on-screen help by pressing the question mark at the top right \r"
                    tHelp.txt+="corner. As long as it's active, you can press any part of the UI and get a description \r"
                    tHelp.txt+="of what that button/slider/... does. \r"
                    tHelp.txt+="Press the X button at the top left to get help on another part of the UI. \r"
                    tHelp.txt+="Press the question mark at the top right to leave help mode and resume normal\r"
                    tHelp.txt+="operation. \r"
                    tHelp.txt+="Press any other part of the screen, including this description, to disable all outputs. \r"
                    tHelp.txt+="For more information, check the help on the page background.\r"
                    tHelp.txt+=" \r"
                    tHelp.txt+="This tip won't reappear until you reset or power cycle Syntherrupter. \r"
                }else if(sys1==tTitle.id)
                {
                    tHelp.txt+="User Settings\r\r"
                    tHelp.txt+="Change the name and password of each user as well as the limits they can operate within. \r"
                    tHelp.txt+="\r"
                    tHelp.txt+="These limits only affect the UI and limit the ranges of the sliders. Even if you had user limits \r"
                    tHelp.txt+="higher than (some) of your coil limits, the values actually applied to each coil will be capped \r"
                    tHelp.txt+="at the respective limit. \r"
                    tHelp.txt+="\r"
                    tHelp.txt+="The first, leftmost user is the one with the least rights. That user cannot access the settings. \r"
                    tHelp.txt+="It's meant as guest account for spectators that shall not be able to do anything wrong. \r"
                    tHelp.txt+="The second user is meant for everyday operation. It has limited access to settings, \r"
                    tHelp.txt+="The third, rightmost user has full access to the UI and can fully operate within the coil limits.\r"
                }else if(sys1==tUser.id)
                {
                    tHelp.txt+="Current User \r\r"
                    tHelp.txt+="The name of the currently active user. This determines the range within which you \r"
                    tHelp.txt+="can operate Syntherrupter. Go to the main menu to change the current user. \r"
                }else if(sys1==tMSI.id||sys1==tMML.id||sys1==tMLS.id)
                {
                    tHelp.txt+="Active Modes \r\r"
                    tHelp.txt+="Modes can stay active even if you leave the corresponding page. Active modes are \r"
                    tHelp.txt+="highlighted at the bottom right.  \r"
                }else if(sys1==0||sys1==tHelp.id)
                {
                    tHelp.txt+="Page background \r\r"
                    tHelp.txt+="The page background, textboxes and non-interactive elements in general shut down \r"
                    tHelp.txt+="all outputs if you press them. This allows you to quickly stop all outputs and all \r"
                    tHelp.txt+="modes if something goes wrong. \r"
                    tHelp.txt+="Note however, that unplugging is the only actually safe way to ensure a complete \r"
                    tHelp.txt+="shutdown! \r"
                    tHelp.txt+="This feature can be temporarily disabled in the general settings. After a reset or \r"
                    tHelp.txt+="power-cycle it will be enabled again.\r"
                }else if(sys1==bReturn.id)
                {
                    tHelp.txt+="Return Button\r\r"
                    tHelp.txt+="Return to the previous page\r"
                    tHelp.txt+="\r"
                    tHelp.txt+="If you want to leave help mode, press the question mark at the top left. \r"
                }else if(sys1==tUserName.id||sys1==tU0Name.id||sys1==tU1Name.id||sys1==tU2Name.id)
                {
                    tHelp.txt+="User Name\r\r"
                    tHelp.txt+="Set an individual name for each user.\r"
                    tHelp.txt+="1-16 characters (less if you're using special characters)\r"
                }else if(sys1==tUserCode.id||sys1==tU0Code.id||sys1==tU1Code.id||sys1==tU2Code.id)
                {
                    tHelp.txt+="User Password\r\r"
                    tHelp.txt+="Set an individual password for each user. Do not use the same password for different accounts. \r"
                    tHelp.txt+="By keeping a password field pressed, you can see the password in clear. \r"
                    tHelp.txt+="Setting one of the passwords to '0' makes Syntherrupter log in into that account automatically. \r"
                    tHelp.txt+="This is by default the case for the rightmost user, which has full rights. \r"
                    tHelp.txt+="1-16 characters, ONLY DIGITS (0-9)!\r"
                }else if(sys1==tUserOntime.id||sys1==user0Ontime.id||sys1==user1Ontime.id||sys1==user2Ontime.id)
                {
                    tHelp.txt+="User Ontime \r\r"
                    tHelp.txt+="Upper limit of the ontime sliders in the UI when this user is logged in. \r"
                    tHelp.txt+="For the rightmost user, this value is automatically determined by the highest coil limit.\r"
                }else if(sys1==tUserBPS.id||sys1==user0BPS.id||sys1==user1BPS.id||sys1==user2BPS.id)
                {
                    tHelp.txt+="User BPS \r\r"
                    tHelp.txt+="Upper limit of the BPS sliders in the UI when this user is logged in. \r"
                }else if(sys1==tUserDuty.id||sys1==user0Duty.id||sys1==user1Duty.id||sys1==user2Duty.id)
                {
                    tHelp.txt+="User Duty \r\r"
                    tHelp.txt+="Upper limit of the duty sliders in the UI when this user is logged in. \r"
                    tHelp.txt+="For the rightmost user, this value is automatically determined by the highest coil limit.\r"
                }else if(sys1==b1.id||sys1==b2.id||sys1==b3.id||sys1==b4.id||sys1==b5.id||sys1==b6.id||sys1==b7.id||sys1==b8.id||sys1==b9.id||sys1==b0.id||sys1==bClear.id||sys1==bOK.id||sys1==tHideBack2.id)
                {
                    tHelp.txt+="Numpad\r\r"
                    tHelp.txt+="Use this numpad to modify any numeric fields on the page.\r"
                    tHelp.txt+="X clears the value. \r"
                    tHelp.txt+="ok applies it. If you select another value to edit, it's applied automatically. \r"
                }else
                {
                    // Nope, no new help text to be displayed
                    sys0=0
                }
                if(sys0!=0)
                {
                    currentHelp.val=sys1
                    vis tHelp,1
                    if(bReturn.txt!="âœ•")
                    {
                        bReturn.txt="âœ•"
                    }
                }
            }
        
        Touch Release Event
            // Check if help text is being displayed and shall be hidden again
            if(bReturn.val==1)
            {
                bReturn.val=0
                if(bReturn.txt!="â†")
                {
                    bReturn.txt="â†"
                }
                vis tHelp,0
                click fDraw,1
                currentHelp.val=-1
            }else if(sys1==btHelp.id)
            {
                click btHelp,0
            }
        
