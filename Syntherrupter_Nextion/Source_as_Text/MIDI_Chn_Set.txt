Page MIDI_Chn_Set
    Attributes
        ID               : 0
        Scope            : local
        Send Component ID: disabled
        Locked           : no
    
    Events
        Preinitialize Event
            // Prevent page refreshs until postinit
            ref_stop
            //
            // Load colors
            click fLoadColors,1
            //
            // Display username
            if(User_Settings.userNum.val==0)
            {
                tUser.txt=" "+User_Settings.u0Name.txt
            }else if(User_Settings.userNum.val==1)
            {
                tUser.txt=" "+User_Settings.u1Name.txt
            }else if(User_Settings.userNum.val==2)
            {
                tUser.txt=" "+User_Settings.u2Name.txt
            }
            //
            // Display all active modes
            sys0=Settings.activeModes.val&1
            if(sys0!=0)
            {
                // Simple Mode is active
                tMSI.bco=6900
            }
            sys0=Settings.activeModes.val&2
            if(sys0!=0)
            {
                // MIDI Live Mode is active
                tMML.bco=6900
            }
            sys0=Settings.activeModes.val&4
            if(sys0!=0)
            {
                // Lightsaber Mode is active
                tMLS.bco=6900
            }
            //
            // Idle field is just used for default text/background color and as target for the numpad if no component is selected. Ergo should be hidden like functions.
            vis fStore,0
            vis fCheck,0
            vis idle,0
            newValTargetId.val=idle.id
            // Set page title
            covx chnNum.val,sChnNum.txt,0,0
            tTitle.txt=sTitleStart.txt+sChnNum.txt
            //
            // Load values
            sys0=NRPData.val
            nDataFine.val=sys0&0xff
            sys0=sys0>>8
            nDataCoarse.val=sys0&0xff
            sys0=sys0>>8
            nNumFine.val=sys0&0xff
            sys0=sys0>>8
            nNumCoarse.val=sys0&0xff
            //
            sys0=MIDIData.val
            nStatus.val=sys0&0xff
            sys0=sys0>>8
            nData1.val=sys0&0xff
            sys0=sys0>>8
            nData2.val=sys0&0xf0
            if(nStatus.val>0)
            {
                if(nStatus.val<0xf0)
                {
                    nStatus.val=nStatus.val&0xf0
                    nStatus.val+=chnNum.val
                }
            }
            //
            // Load Help Mode
            if(Help_Info.helpMode.val==0)
            {
                vis qrHelp,0
                fill qrHelp.x,qrHelp.y,qrHelp.w,qrHelp.h,b[0].bco
            }else
            {
                tempStr.txt=tTitle.txt
                showHelp.val=1
                click 0,1
            }
            //
            // Enable page refreshs again
            ref_star
        
        Postinitialize Event
            // Draw horizontal lines for NRP Editor table
            // sys0: x start, sys1: x end, sys2: y
            sys0=tNRPN.x
            sys1=tData.x+tData.w
            sys2=tDataCoarse.y-tNRPN.y-tNRPN.h
            sys2/=2
            sys2+=tNRPN.y+tNRPN.h
            line sys0,sys2,sys1,sys2,tNRPN.pco
            //
            //sys2=nNumCoarse.y-tDataCoarse.y-tDataCoarse.h
            //sys2/=2
            //sys2+=tDataCoarse.y+tDataCoarse.h
            //line sys0,sys2,sys1,sys2,tNRPN.pco
            //
            // Draw vertical lines for NRP Editor table
            // sys0: y start, sys1: y end, sys2: x
            sys0=sys2
            sys1=nNumCoarse.y+nNumCoarse.h
            sys2=tNRPFine.x-tNRPCoarse.x-tNRPCoarse.w
            sys2/=2
            sys2+=tNRPCoarse.x+tNRPCoarse.w
            line sys2,sys0,sys2,sys1,tNRPN.pco
            //
            sys2=tDataFine.x-tDataCoarse.x-tDataCoarse.w
            sys2/=2
            sys2+=tDataCoarse.x+tDataCoarse.w
            line sys2,sys0,sys2,sys1,tNRPN.pco
            //
            sys0=tNRPN.y
            sys2=tData.x-tNRPN.x-tNRPN.w
            sys2/=2
            sys2+=tNRPN.x+tNRPN.w
            line sys2,sys0,sys2,sys1,tNRPN.pco
            //
            // Draw MIDI Command vertical lines.
            // sys0: y start, sys1: y end, sys2: x
            sys0=tStatus.y
            sys1=nStatus.y+nStatus.h
            sys2=tData1.x-tStatus.x-tStatus.w
            sys2/=2
            sys2+=tStatus.x+tStatus.w
            line sys2,sys0,sys2,sys1,tNRPN.pco
            //
            sys2=tData2.x-tData1.x-tData1.w
            sys2/=2
            sys2+=tData1.x+tData1.w
            line sys2,sys0,sys2,sys1,tNRPN.pco
        
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(Other_Settings.nBackOff.val!=0)
                {
                    // Default "stop" action.
                    // Send Mode Emergency Stop which turns all outputs off (but actually keeps the current mode)
                    prints "mes",3
                    // Set all ontime and duty settings of all pages to 0.
                    // First come the global variables then the local variables.
                    Simple.ontime.val=0
                    Simple.duty.val=0
                    Simple.set1.val=Simple.set1.val&0x0000ffff
                    Simple.set2.val=Simple.set2.val&0x0000ffff
                    Simple.set3.val=Simple.set3.val&0x0000ffff
                    Simple.set4.val=Simple.set4.val&0x0000ffff
                    Simple.set5.val=Simple.set5.val&0x0000ffff
                    Simple.set6.val=Simple.set6.val&0x0000ffff
                    MIDI_Live.ontime.val=0
                    MIDI_Live.duty.val=0
                    MIDI_Live.set1.val=0
                    MIDI_Live.set2.val=0
                    MIDI_Live.set3.val=0
                    MIDI_Live.set4.val=0
                    MIDI_Live.set5.val=0
                    MIDI_Live.set6.val=0
                    Lightsaber.ontime.val=0
                    Lightsaber.ontimes12.val=0
                    Lightsaber.ontimes34.val=0
                    Lightsaber.ontimes56.val=0
                }
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfgu"
                click qrHelp,0
            }
        
Variable (int32) origin
    Attributes
        ID   : 8
        Scope: global
        Value: 0
    
Variable (string) sTitleStart
    Attributes
        ID            : 9
        Scope         : local
        Text          : Settings for Channel 
        Max. Text Size: 30
    
Variable (int32) chnNum
    Attributes
        ID   : 10
        Scope: global
        Value: 0
    
Variable (string) sChnNum
    Attributes
        ID            : 11
        Scope         : local
        Text          : 0
        Max. Text Size: 2
    
Variable (int32) newValTargetId
    Attributes
        ID   : 29
        Scope: local
        Value: 68
    
Variable (int32) newSelect
    Attributes
        ID   : 30
        Scope: local
        Value: 0
    
Variable (int32) base
    Attributes
        ID   : 42
        Scope: local
        Value: 16
    
Variable (string) sHex
    Attributes
        ID            : 57
        Scope         : local
        Text          : Hex
        Max. Text Size: 10
    
Variable (string) sDec
    Attributes
        ID            : 58
        Scope         : local
        Text          : Decimal
        Max. Text Size: 10
    
Variable (string) sKeepStart
    Attributes
        ID            : 60
        Scope         : local
        Text          : Enter 
        Max. Text Size: 50
    
Variable (string) sKeepEnd
    Attributes
        ID            : 61
        Scope         : local
        Text          :  to keep the current value.
        Max. Text Size: 50
    
Variable (int32) NRPData
    Attributes
        ID   : 63
        Scope: global
        Value: 704643072
    
Variable (int32) MIDIData
    Attributes
        ID   : 64
        Scope: global
        Value: 0
    
Variable (string) tempStr
    Attributes
        ID            : 69
        Scope         : local
        Text          : 
        Max. Text Size: 32
    
Variable (int32) showHelp
    Attributes
        ID   : 70
        Scope: local
        Value: 0
    
Number fStore
    Attributes
        ID                 : 14
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 0
    
    Events
        Touch Press Event
            // Serial Data format: 'd', Data Byte 1, 2, 3, 4, 5
            // Data byte 1:
            //   Bits 0-3: In case of an NRP change (see below): Channel to which the settings apply. Otherwise unused and should be 0.
            //   Bits 4-5: 0: NRP Change, 1: Normal MIDI Command, 2: unused, 3: unused.
            //   Bits 6-7: Mode
            //     0b10 = MIDI Command
            //     Other values = Not used here.
            // NRP Change:
            //   Data byte 2: NRP Number coarse. 0-127: set value. 128: keep current value
            //   Data byte 3: NRP Number fine. 0-127: set value. 128: keep current value
            //   Data byte 4: NRP Data coarse. 0-127: set value. 128: keep current value
            //   Data byte 5: NRP Data fine. 0-127: set value. 128: keep current value
            // MIDI Command:
            //   Data byte 2: MIDI Status byte
            //   Data byte 3: MIDI Data byte 1
            //   Data byte 4: MIDI Data byte 2
            //   Data byte 5: Unused. Should be 0
            click fCheck,0
            //
            // If all NRP values are 128 (sum = 512), all values shall be preserved. Don't send them.
            sys0=nNumCoarse.val+nNumFine.val+nDataCoarse.val+nDataFine.val
            if(sys0<512)
            {
                // Data byte 1
                sys0=2<<6
                sys0+=chnNum.val
                //
                sys1=0
                sys1+=nNumCoarse.val
                sys1=sys1<<8
                sys1+=nNumFine.val
                sys1=sys1<<8
                sys1+=nDataCoarse.val
                sys1=sys1<<8
                sys1+=nDataFine.val
                // Send data only if it was modified or if the channel changed.
                if(NRPData.val!=sys1)
                {
                    NRPData.val=sys1
                    prints "d",1
                    prints sys0,1
                    prints NRPData.val,4
                }
            }
            //
            // If MIDI command is valid.
            if(nStatus.val>=128)
            {
                // Data byte 1
                sys0=2
                sys0=sys0<<2
                sys0+=1
                sys0=sys0<<4
                //
                sys1=0
                sys1=nData2.val
                sys1=sys1<<8
                sys1+=nData1.val
                sys1=sys1<<8
                sys1+=nStatus.val
                sys2=sys1&0xfff0ffff
                // Send data only if it was modified.
                if(MIDIData.val!=sys2)
                {
                    MIDIData.val=sys2
                    prints "d",1
                    prints sys0,1
                    prints sys1,4
                }
            }
        
Number nNumCoarse
    Attributes
        ID                 : 31
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 42
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Check if values are legal
                click fCheck,0
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                nNumCoarse.bco=idle.pco
                nNumCoarse.pco=idle.bco
                newValTargetId.val=nNumCoarse.id
                // A new value has been selected
                newSelect.val=1
            }else
            {
                // Show Help
                qrHelp.txt="git.io/JkfgV"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Number nNumFine
    Attributes
        ID                 : 35
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 0
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Check if values are legal
                click fCheck,0
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                nNumFine.bco=idle.pco
                nNumFine.pco=idle.bco
                newValTargetId.val=nNumFine.id
                // A new value has been selected
                newSelect.val=1
            }else
            {
                // Show Help
                qrHelp.txt="git.io/JkfgV"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Number nDataCoarse
    Attributes
        ID                 : 36
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 128
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Check if values are legal
                click fCheck,0
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                nDataCoarse.bco=idle.pco
                nDataCoarse.pco=idle.bco
                newValTargetId.val=nDataCoarse.id
                // A new value has been selected
                newSelect.val=1
            }else
            {
                // Show Help
                qrHelp.txt="git.io/JkfgV"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Number nDataFine
    Attributes
        ID                 : 40
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 128
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Check if values are legal
                click fCheck,0
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                nDataFine.bco=idle.pco
                nDataFine.pco=idle.bco
                newValTargetId.val=nDataFine.id
                // A new value has been selected
                newSelect.val=1
            }else
            {
                // Show Help
                qrHelp.txt="git.io/JkfgV"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Number nStatus
    Attributes
        ID                 : 52
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 0
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Check if values are legal
                click fCheck,0
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                nStatus.bco=idle.pco
                nStatus.pco=idle.bco
                newValTargetId.val=nStatus.id
                // A new value has been selected
                newSelect.val=1
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfgw"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Number nData1
    Attributes
        ID                 : 53
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 0
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Check if values are legal
                click fCheck,0
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                nData1.bco=idle.pco
                nData1.pco=idle.bco
                newValTargetId.val=nData1.id
                // A new value has been selected
                newSelect.val=1
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfgw"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Number nData2
    Attributes
        ID                 : 54
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 0
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Check if values are legal
                click fCheck,0
                // Reset push state of last selected value
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                // Mark this field as pushed
                nData2.bco=idle.pco
                nData2.pco=idle.bco
                newValTargetId.val=nData2.id
                // A new value has been selected
                newSelect.val=1
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfgw"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
XFloat idle
    Attributes
        ID                 : 28
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Value              : 0
    
Text tHideBack4
    Attributes
        ID                 : 1
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  
        Max. Text Size     : 1
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tHideBack3
    Attributes
        ID                 : 2
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  
        Max. Text Size     : 1
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tHideBack2
    Attributes
        ID                 : 3
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  
        Max. Text Size     : 1
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tHideBack
    Attributes
        ID                 : 4
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  
        Max. Text Size     : 1
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tTitle
    Attributes
        ID                 : 5
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Settings for Channel 42
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tChan
    Attributes
        ID                 : 7
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : NRP Editor
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text fCheck
    Attributes
        ID                 : 27
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  
        Max. Text Size     : 10
    
    Events
        Touch Release Event
            // Settings must stay in certain ranges. this function checks and fixes them.
            //
            // NRP values must be between 0 and 127. Any higher value becomes 128, which means "not send".
            if(nNumCoarse.val>128)
            {
                nNumCoarse.val=128
            }
            if(nNumFine.val>128)
            {
                nNumFine.val=128
            }
            if(nDataCoarse.val>128)
            {
                nDataCoarse.val=128
            }
            if(nDataFine.val>128)
            {
                nDataFine.val=128
            }
            //
            // Status byte must be between 128 and 255. A value of 127 means no command will be send. Data bytes must be between 0 and 127
            if(nStatus.val<128)
            {
                nStatus.val=0
            }else if(nStatus.val>255)
            {
                nStatus.val=255
            }else if(nStatus.val<0xf0)
            {
                nStatus.val=nStatus.val&0xf0
                nStatus.val+=chnNum.val
            }
            if(nData1.val>127)
            {
                nData1.val=127
            }
            if(nData2.val>127)
            {
                nData2.val=127
            }
        
Text tNRPN
    Attributes
        ID                 : 32
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : NRP Number
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tNRPCoarse
    Attributes
        ID                 : 33
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Coarse
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tNRPFine
    Attributes
        ID                 : 34
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Fine
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tData
    Attributes
        ID                 : 37
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Data Entry
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tDataCoarse
    Attributes
        ID                 : 38
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Coarse
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tDataFine
    Attributes
        ID                 : 39
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Fine
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tMIDICmd
    Attributes
        ID                 : 41
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : MIDI Command
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tStatus
    Attributes
        ID                 : 49
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Status
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tData1
    Attributes
        ID                 : 50
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Data 1
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tData2
    Attributes
        ID                 : 51
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Data 2
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tSelToMod
    Attributes
        ID                 : 56
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Select any value to modify.
        Max. Text Size     : 30
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tKeep
    Attributes
        ID                 : 59
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Enter 0x80 to keep the current value.
        Max. Text Size     : 60
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tNoMIDI
    Attributes
        ID                 : 62
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : A status of 0 sends no MIDI command.\r\nUse Data 2 if only 1 data byte is required.
        Max. Text Size     : 200
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tUser
    Attributes
        ID                 : 65
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               :  Guest
        Max. Text Size     : 32
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tMSI
    Attributes
        ID                 : 66
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Simple
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tMML
    Attributes
        ID                 : 67
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : MIDI Live
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
Text tMLS
    Attributes
        ID                 : 68
        Scope              : local
        Send Component ID  : disabled
        Associated Keyboard: none
        Text               : Lightsaber
        Max. Text Size     : 16
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click 0,1
        
QR Code qrHelp
    Attributes
        ID               : 71
        Scope            : local
        Send Component ID: disabled
        Text             : git.io/JkvOK
        Max. Text Size   : 16
    
    Events
        Touch Release Event
            if(showHelp.val==0)
            {
                showHelp.val=1
                tempStr.txt=tTitle.txt
                tTitle.txt="Get Help/Link for..."
                // keep QR code on top
                ref qrHelp
                // Show modified title before stopping screen refreshs.
                doevents
                ref_stop
            }else
            {
                showHelp.val=0
                tTitle.txt=tempStr.txt
                // keep QR code on top
                ref qrHelp
                ref_star
            }
        
Button bReturn
    Attributes
        ID               : 6
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : Return
        Max. Text Size   : 10
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Since this code is also executed by the previous/next buttons, it can't be here, otherwise you would see a Touch Press Event on this button, too.
                click fStore,1
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfgo"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Go back to origin page.
                page origin.val
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bPrevious
    Attributes
        ID               : 12
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : Previous
        Max. Text Size   : 10
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Save current state and send it to the microcontroller
                click fStore,1
                // Set previous coil
                if(chnNum.val>0)
                {
                    chnNum.val-=1
                }else
                {
                    chnNum.val=15
                }
                // Reload page for previous coil
                page MIDI_Chn_Set
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfgr"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bNext
    Attributes
        ID               : 13
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : Next
        Max. Text Size   : 10
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
                // Save current state and send it to the microcontroller
                click fStore,1
                // Set next coil
                if(chnNum.val<15)
                {
                    chnNum.val+=1
                }else
                {
                    chnNum.val=0
                }
                // Reload page for previous coil
                page MIDI_Chn_Set
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfgr"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b0
    Attributes
        ID               : 15
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 0
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b1
    Attributes
        ID               : 16
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 1
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=1
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b2
    Attributes
        ID               : 17
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 2
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=2
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b3
    Attributes
        ID               : 18
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 3
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=3
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b4
    Attributes
        ID               : 19
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 4
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=4
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b5
    Attributes
        ID               : 20
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 5
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=5
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b6
    Attributes
        ID               : 21
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 6
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=6
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b7
    Attributes
        ID               : 22
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 7
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=7
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b8
    Attributes
        ID               : 23
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 8
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=8
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button b9
    Attributes
        ID               : 24
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : 9
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=9
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bClear
    Attributes
        ID               : 25
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : X
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                b[newValTargetId.val].val=0
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bOK
    Attributes
        ID               : 26
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : ok
        Max. Text Size   : 2
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                b[newValTargetId.val].bco=idle.bco
                b[newValTargetId.val].pco=idle.pco
                newValTargetId.val=idle.id
                //
                // Make sure the values will be transmitted.
                NRPData.val+=1
                MIDIData.val+=1
                click fStore,1
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bA
    Attributes
        ID               : 43
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : A
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=10
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bB
    Attributes
        ID               : 44
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : B
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=11
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bC
    Attributes
        ID               : 45
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : C
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=12
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bD
    Attributes
        ID               : 46
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : D
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=13
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bE
    Attributes
        ID               : 47
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : E
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=14
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bF
    Attributes
        ID               : 48
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : F
        Max. Text Size   : 1
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(newSelect.val!=0)
                {
                    newSelect.val=0
                    b[newValTargetId.val].val=0
                }else
                {
                    b[newValTargetId.val].val*=base.val
                }
                b[newValTargetId.val].val+=15
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Button bBase
    Attributes
        ID               : 55
        Scope            : local
        Send Component ID: disabled
        State            : unpressed
        Text             : Hex
        Max. Text Size   : 10
    
    Events
        Touch Press Event
            if(showHelp.val==0)
            {
                // Normal Operation
            }else
            {
                // Show Help
                qrHelp.txt="git.io/Jkfga"
            }
        
        Touch Release Event
            if(showHelp.val==0)
            {
                // Normal Operation
                if(bBase.txt==sDec.txt)
                {
                    bBase.txt=sHex.txt
                    base.val=16
                    nNumCoarse.format=2
                    nNumFine.format=2
                    nDataCoarse.format=2
                    nDataFine.format=2
                    nStatus.format=2
                    nData1.format=2
                    nData2.format=2
                    tKeep.txt=sKeepStart.txt+"0x80"+sKeepEnd.txt
                    vis bA,1
                    vis bB,1
                    vis bC,1
                    vis bD,1
                    vis bE,1
                    vis bF,1
                }else
                {
                    bBase.txt=sDec.txt
                    base.val=10
                    nNumCoarse.format=0
                    nNumFine.format=0
                    nDataCoarse.format=0
                    nDataFine.format=0
                    nStatus.format=0
                    nData1.format=0
                    nData2.format=0
                    tKeep.txt=sKeepStart.txt+"128"+sKeepEnd.txt
                    // Normal operation
                    // WORKAROUND. Hiding a component when the page background color changed doesnt work properly.
                    // ref 0 takes to long, ref component doesnt work. hence: manually draw a rectangle of the right color in this area.
                    //sys0=bF.x+bF.w-bA.x
                    //sys1=bF.y+bF.h-bA.y
                    //fill bA.x,bA.y,sys0,sys1,b[0].bco
                    ref_stop
                    vis bA,0
                    fill bA.x,bA.y,bA.w,bA.h,b[0].bco
                    vis bB,0
                    fill bB.x,bB.y,bB.w,bB.h,b[0].bco
                    vis bC,0
                    fill bC.x,bC.y,bC.w,bC.h,b[0].bco
                    vis bD,0
                    fill bD.x,bD.y,bD.w,bD.h,b[0].bco
                    vis bE,0
                    fill bE.x,bE.y,bE.w,bE.h,b[0].bco
                    vis bF,0
                    fill bF.x,bF.y,bF.w,bF.h,b[0].bco
                    ref_star
                }
            }else
            {
                // Show Help
                click qrHelp,0
            }
        
Hotspot fLoadColors
    Attributes
        ID               : 72
        Scope            : local
        Send Component ID: disabled
    
    Events
        Touch Press Event
            // Changes all page components according to the current color set.
            // Note: This component has to be the last component of the page.
            //
            // sys0: component id
            // sys1: component type
            // sys2: picture id offset for current color mode
            sys2=Settings.colorMode.val*Settings.picCount.val
            for(sys0=0;sys0<fLoadColors.id;sys0++)
            {
                // More convenient for typing
                sys1=b[sys0].type
                if(sys1==121)
                {
                    // Types that have bco
                    // page
                    if(b[sys0].bco!=Settings.backCol2.val)
                    {
                        b[sys0].bco=Settings.backCol.val
                    }
                }else if(sys1==54||sys1==59||sys1==116||sys1==55)
                {
                    // Types that have bco, pco, and sta:
                    // number, float, text, scroll text
                    if(b[sys0].sta==1)
                    {
                        if(b[sys0].bco!=Settings.backCol2.val)
                        {
                            b[sys0].bco=Settings.backCol.val
                            b[sys0].pco=Settings.frontCol.val
                        }else
                        {
                            b[sys0].pco=Settings.frontCol2.val
                        }
                    }
                }else if(sys1==98||sys1==53)
                {
                    // Types that have pco, pic, pco2, pic2, sta:
                    // button, dual-state button
                    if(b[sys0].sta==2)
                    {
                        b[sys0].pco=Settings.frontCol.val
                        b[sys0].pco2=Settings.backCol.val
                        b[sys0].pic=b[sys0].pic%Settings.picCount.val
                        b[sys0].pic+=sys2
                        b[sys0].pic2=b[sys0].pic+1
                    }
                }else if(sys1==58)
                {
                    // Types that have bco, pco
                    // QR Code
                    b[sys0].bco=Settings.backCol.val
                    b[sys0].pco=Settings.qrFrontCol.val
                }else if(sys1==1)
                {
                    // Types that have pic, pic2:
                    // slider
                    b[sys0].pic=b[sys0].pic%Settings.picCount.val
                    b[sys0].pic+=sys2
                    b[sys0].pic2=b[sys0].pic2%Settings.picCount.val
                    b[sys0].pic2+=sys2
                }
            }
        
